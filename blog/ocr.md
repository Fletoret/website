---
title: Biblioteka Dixhitale
subtitle: Burim materiali dhe aventura nÃ« tekst
author: Nush Motmoti
date: 2023-12-26
tags: lexim, programim
thumbnail:
published: true
---

SÃ« pari, dhe mÃ« pak e rÃ«ndÃ«sishmja, "**digjitale**", e shkruar me "**gj**"
tingÃ«llon Ã§uditshÃ«m, ... pavarsisht vendlindjes. Shqipja shkruhet siÃ§ flitet,
por dikush, a disa, tek Akademia e Shkencave, kanÃ« vendosur ta á—ªÑï¼¥ğ“™áµ—ğ”°Ğ½ğ“´ğ”¯ğ“¾ğ’¶ğ‰Î·e,
duke harruar qÃ« njÃ« gjuhÃ« qÃ« nuk flitet, vdes - ndoshta jo shumÃ« ndryshe nga
vetÃ« Akademia. Tani qÃ« fjalÃ«t e Ã«mbla i thamÃ«, le ta kthejmÃ« vÃ«mendjen tek njÃ«
tjetÃ«r institucion: Biblioteka KombÃ«tare.

### Biblioteka KombÃ«tare Di<span style="color: var(--text-secondary)">~~gj~~</span>xhitale dhe Fletoret

NjÃ« pjesÃ« shumÃ« tÃ« vogel tÃ« katalogut, kryesisht vepra tÃ« vjetra qÃ« janÃ« nÃ«
domain-in publik[^1], Biblioteka KombÃ«tare e ofron nÃ«pÃ«rmjet BibliotekÃ«s
KombÃ«tare Dixhitale (BKD), tÃ« cilÃ«n mund ta gjeni nÃ« kÃ«tÃ« adresÃ«: [bibliotekadigjitale.bksh.al](https://bibliotekadigjitale.bksh.al/).
NÃ«se i rezistuat tÃ« klikuarit tÃ« link-ut, mos kini merak - do t'ju tregoj
mjaftueshÃ«m nÃ« kÃ«tÃ« shkrim, ndÃ«rsa ju qÃ« u kthyet pasi klikuat, mirÃ«seerdhÃ«t:
do tÃ« flasim pÃ«r Ã§farÃ« mungon tek ajo qÃ« sapo patÃ«.

![Figura 1: Mrizi i ZÃ¢navet, Biblioteka Dixhitale](/blogassets/img/ocr-img1.png)

Si fillim, Biblioteka KombÃ«tare skanon faqet e veprave nÃ« katalog, dhe
i ofron kÃ«to nÃ«pÃ«rmjet njÃ« sistemi qÃ« quhet International Image
Interoperability Framework (IIIF)[^2], nÃ« shqip: Kuadri NdÃ«rkombÃ«tar i
NdÃ«rveprueshmerisÃ« sÃ« Imazheve). IIIF e bÃ«n tÃ« mundur qe Ã§do imazh
tÃ« shoqÃ«rohet nga metadata tÃ« dobishme, por pÃ«r fat tÃ« keq ajo qÃ« do doja tÃ« kisha gjetur pÃ«r Fletoret: tesktin e ketyre veprave, nuk e gjeta.
Kjo Ã«shtÃ« arsyeja pse sÃ« bashku me njÃ« grup tÃ« vogÃ«l vullnetaresh, po
pÃ«rpiqemi tÃ« kopjojmÃ« veprÃ«n e Gjergj Fishtes: **Mrizi i ZÃ¢navet** nga
versioni i skanuar (shiko Figuren 1), nÃ« tekst, qÃ« tÃ« mund tÃ« lexohet dhe
ndahet lehtÃ«sisht. KÃ«tÃ« pÃ«rpjekje mund ta ndiqni tek [fletoret.com/fishta](/fishta).

### PÃ«rshpejtimi i kopjimit

Ajo qÃ« duam tÃ« ndÃ«rtojme, Ã«shtÃ« njÃ« mjet qe tÃ« na ndihmojÃ« tÃ« kopjojmÃ«
pÃ«rmbajtjen e kÃ«tyre librave dixhital nga BKD sa mÃ« shpejt. Sfidat janÃ«
kÃ«to:

1. Kopjo Ã§do faqe nga njÃ« libÃ«r si imazh.
2. PÃ«r secilÃ«n, lexo dhe shkruaj tekstin nÃ« kÃ«tÃ« imazh.
3. Kopjo tekstin nÃ« njÃ« dokument tÃ« pastÃ«r.
4. Edito dokumentin e paster qÃ« tÃ« jete i publikueshÃ«m.

Sado tÃ« madhe ta kesh dÃ«shirÃ«n si vullnetar, realiteti i tÃ« kopjuarit rresht
pÃ«r rresht gegnishten e pastandartizuar me germa si: `Ã¢`, `Ã©`, `Ã®`, `Ã½`, ...,
ta zbut vullnetin, sikur vetÃ«m prej faktit qÃ« kÃ«to germa nuk di as si t'i
nxjerrÃ«sh nga tastiera.

NjÃ« lexues i kujdesshÃ«m, do e ketÃ« vÃ«nÃ« re qÃ« ndoshta disa prej kÃ«tyre hapave
mund tÃ« kombinohen, dhe njÃ« pjese mÃ« e madhe mund tÃ« automatizohen duke
pÃ«rdorur pak teknologji. Kjo Ã«shtÃ« ajo qÃ« do bÃ«jmÃ«, KohÃ«n qÃ« mbetet deri nÃ« fund tÃ« ketij shkrimi do ta shpenzojmÃ« duke
shpjeguar teknikisht dhe shkurtimisht, ndÃ«rtimin e ketyrÃ« mjeteve modeste qÃ« e
bejne kÃ«tÃ« situatÃ« jo tÃ« pÃ«rkryer, pak mÃ« tÃ« tolerueshme. Rezultati i kÃ«saj
pÃ«rpjekje Ã«shtÃ« **Kopjuesi**: [fletoret.com/ocr](https://fletoret.com/ocr/).

<div class="iframe-container">
    <iframe src="https://youtube.com/embed/9pqEHjTr7yk"></iframe>
</div>
<figcaption>Video 1: Kopjuesi pÃ«r editorÃ«t</figcaption>

NÃ«se doni tÃ« ndihmoni, shikoni Ã§farÃ« pjesÃ«sh mungojnÃ« nga Mrizi i ZÃ¢navet tek
Fletoret, dhe pÃ«rdorni Kopjuesin pÃ«r ta bÃ«rÃ« gati pÃ«r publikim, fillimisht duke
e dÃ«rguar nÃ« Reddit: [r/fletoret](https://reddit.com/r/fletoret) ose Twitter:
[@FletoretSQ](https://twitter.com/FletoretSQ).

**ShÃ«nim teknik**: ParagrafÃ«t qÃ« vijojnÃ« pÃ«rmbajnÃ« disa detaje teknike mbi
ndÃ«rtimin e Kopjuesit, dhe nuk Ã«shtÃ« e nevojshme t'i lexoni, ... pÃ«rveÃ§se, jeni
kuriozÃ« ose doni tÃ« mÃ«soni si t'i pÃ«rdorni kÃ«to mjete pÃ«r vepra tÃ« tjera.

Fillimisht, duhet tÃ« ndajme problemin e tÃ« ndÃ«rtuarit tÃ« Kopjuesit nÃ« copa tÃ«
vogla:

- **Problemi 1**: Shkarko tÃ« gjithÃ« imazhet.
- **Problemi 2**: Konverto secilin imazh nÃ« tekst.
- **Problemi 3**: ShÃ«rbeji imazhet pÃ«rbri tekstit tÃ« gjeneruar.

### Problemi 1: Shkarko tÃ« gjithÃ« imazhet.

Fillimisht, mÃ«suam qÃ« sistemi qÃ« pÃ«rdor BKD Ã«shtÃ« IIIF,
dhe pas njÃ« kÃ«rkimi tÃ« shkurtÃ«r, siÃ§ pritej, mÃ«sojmÃ« qÃ« ka edhe njerÃ«z tÃ« tjerÃ« me tÃ« njÃ«jtin problem: Automatizimin e shkarkimit tÃ« imazheve nga servera IIIF.
NjÃ« prej kÃ«tyre projekteve Ã«shtÃ« `iiif_downloader` nga Yale Digital Humanities
Lab [^3].

MÃ« poshtÃ« Ã«shtÃ« njÃ« shembull i shkurtÃ«r se si tÃ« shkarkojmÃ« tÃ« gjithÃ«
faqet e Mrizit tÃ« Zanave si imazhe. GjithÃ§ka qÃ« duhet tÃ« dimÃ«, Ã«shtÃ«
adresa e asaj qÃ« nÃ« IIIF quhet Manifest i veprÃ«s. KÃ«tÃ« mund ta gjejmÃ«
tek shenja e informacionit `i` tek BKD.

```py
from iiif_downloader import Manifest

MANIFEST_URL_MRIZI_I_ZANAVE ='https://bibliotekadigjitale.bksh.al/iiif/Manifester/IIIF/libra!HASHae57.dir'

Manifest(url=MANIFEST_URL_MRIZI_I_ZANAVE).save_images()
```

Kjo krijon njÃ« direktori qÃ« quhet `iiif-downloads`, nÃ« tÃ« cilen
ndodhet njÃ« nÃ«ndirektori: `images`, ku gjejmÃ« tÃ« gjithÃ« imazhet.

### Problemi 2: Konverto secilin imazh nÃ« tekst.

Edhe ky Ã«shtÃ« njÃ« problem i mirÃ«studiuar, pÃ«r tÃ« cilin mund tÃ« kÃ«rkoni mÃ«
shumÃ« duke shkruar **Optical Character Recognition** (OCR). NÃ« vija tÃ« trasha,
sa mÃ« i mirÃ« skanimi, sa mÃ« e thjÃ«shtÃ« tipografia dhe sa mÃ« popullore gjuha
aq mÃ« cilÃ«sor do tÃ« jetÃ« konvertimi i pÃ«rmbajtjes sÃ« imazhit nÃ« tekst. Pra,
nÃ« fund tÃ« ketij proÃ§esi duhet qÃ« njÃ« editor gjithsesi ta kontrollojÃ« tekstin,
por ky hall Ã«shtÃ« minimal krahasuar me tÃ« kopjuarit manual tÃ« kÃ«saj pÃ«rmbajtje.

Ka shumÃ« projekte qÃ« mund tÃ« pÃ«rdoren pÃ«r konvertimin e imazheve nÃ« teskt.
NÃ«se keni shumÃ« pak imazhe, mund ta bÃ«ni dhe online. PÃ«r kÃ«tÃ« shembull do tÃ«
pÃ«rdorim `ocrmac` [^4], zgjedhje shumÃ« e mirÃ« nÃ«se pÃ«rdorni njÃ« kompjuter Apple
, por parimi Ã«shtÃ« i njÃ«jtÃ« pÃ«r Ã§do projekt tjetÃ«r, e.g.: `tesseract` [^5].

Nga **Problemi 1**, kemi tÃ« gjithÃ« imazhet nÃ« `iiif-downloads/images`. Le
tÃ« marrim njÃ« imazh specifikisht pÃ«r tÃ« pare si do tÃ« funksionojÃ«.
Marrim faqen 7: `iiif-downloads/images/libra1!HASHae57.dir!page7.png`

<figure>
<img style="width: 300px; margin: auto" src="/blogassets/img/page7sm.png" />
</figure>
<figcaption style="text-align: center">
    Figura 2: Shembull i njÃ« faqje
</figcaption>

Tani, shkruajmÃ« njÃ« program tÃ« vogel pÃ«r tÃ« parÃ« Ã§farÃ« mund tÃ« nxjerrim nga
imazhi:

```py
from ocrmac import ocrmac

IMG_URL_PATH = "./iiif-downloads/images/libra1!HASHae57.dir!page7.png"
annotations = ocrmac.OCR(IMG_URL_PATH).recognize()

for (text, confidence) in annotations:
    print(text)
```

dhe rezultati Ã«shtÃ«:

```txt
Shaypnija.
Ã´hÃ¨ hÃ¢na do t' a dije,
EohÃ¨ dielli do t' kete pÃ¡,
Se per cark ksaj rrokullije,
Si Shaypnija 'i veno nuk kÃ¡ !
Fusha t' gjna e kodra t' blera,
Zijes s'mnershme larg kÃ» Ã¢sht droja,
Me gaz t' vet ktÃ» i veshe Prenovera,
Si t' Parrizit t' larmet shtroja.
Nen nji gielle perhere t kullueme.
N' rreze e n'drite pershkue unjÃ­,
Bjeshke e male tÃ« blerueme
Si vigÃ¢j shtiellen n' ajrÃ­.
Ke ato bjeshke e ke ato male
Kroje t' kjarta e t' cemta gurra,
Tuj rremye per mriza hale,
Gurrgulloin per rrÃ¢je e curra.
Mbi ato male e bjeshke kreshnike
LÃ©in mande' ata djelm si ZÃ¢na,
( 5 )
```

SiÃ§ duket, ka goxha gabime, ku dallohet ngatÃ«rrimi i `d`, `q`, `j`, `Ã§`,
por nga ana tjetÃ«r: Ã«shtÃ« shumÃ« mÃ« e lehte tÃ« korrigjosh gabimet, se sa ta
kopjosh nga e para.

### Problemi 3: ShÃ«rbeji imazhet pÃ«rbri tekstit tÃ« gjeneruar.

Problemet thelbÃ«sore janÃ« zgjidhur. NÃ« kÃ«tÃ« hap, do tÃ« krijojmÃ« njÃ« file
`mrizi_i_zanavet.json`, ku do tÃ« ruajmÃ« Ã§do imazh dhe tekstin e nxjerrÃ«
prej tij, sipas numrit tÃ« faqes. MeqÃ«nÃ«se imazhet janÃ« tÃ« mÃ«dha, dhe ne
nuk duam tÃ« paguajmÃ« koston e ruajtjes dhe shÃ«rbyerit tÃ« tyre, do tÃ« pÃ«rdorim
URL-nÃ« e imazheve qÃ« shÃ«rben Biblioteka KombÃ«tare.

Struktura pÃ«rfundimtare do tÃ« jete diÃ§ka e tillÃ«:

```py
[
    # Faqja 1
    [
        # URL e imazhit pÃ«r faqen 1
        "https://bibliotekadigjitale.bksh.al/iiif/Scaler/IIIF/libra1!HASHae57.dir!page1.png/full/,1500/0/default",

        # annotations
        [
            [
                rreshti_n,
                confidenca
            ]
            ...
        ]
    ]
    ... Faqet e tjera
]
```

Ka disa mÃ«nyra pÃ«r ta strukturuar kÃ«tÃ« informacion, kjo Ã«shtÃ« vetÃ«m njÃ«
prej tyre. Tani le tÃ« shkruajmÃ« njÃ« program tÃ« vogÃ«l qÃ« nxjerr
tekstin pÃ«r tÃ« gjithÃ« imazhet, dhe i ruan pÃ«rbri njÃ«ri-tjetrit:

```py

import os
import json

from ocrmac import ocrmac
from rich.progress import track

IMAGE_BASE_URL = "https://bibliotekadigjitale.bksh.al/iiif/Scaler/IIIF/"


def get_image_url(img_name):
    """Funksion qe na mundeson tÃ« ndertojme URL-ne e imazhit tek
    Biblioteka Kombetare nga emri i file qe kemi shkarkuar.

    Shembull:
        https://bibliotekadigjitale.bksh.al/iiif/Scaler/IIIF/libra1!HASHae57.dir!page7/full/,1500/0/default
    """

    return f"{IMAGE_BASE_URL}{img_name}/full/,1500/0/default"


def annotate_collection():,

    with open("mrizi_i_zanave.json", "w") as f:
        output = []
        image_dir = "./iiif-downloads/images/"

        # Rendisim sipas nr tÃ« faqes
        sorted_img_names = sorted(
            os.listdir(image_dir),
            key=lambda x: int(x.split("!page")[1].removesuffix(".png"))
        )

        for i in track(range(len(sorted_img_names)), description="Processing..."):
            img_name = sorted_img_names[i]
            annotations = ocrmac.OCR(f"{image_dir}/{img_name}").recognize()
            text = [[text, confidence] for text, confidence, _ in annotations]
            output.append([get_image_url(img_name), text])

        f.write(json.dumps(output, indent=2))
```

Kaq ishte. Tani kemi gjithÃ§ka qÃ« na duhet pÃ«r tÃ« ndÃ«rtuar atÃ« qÃ« shikoni tek
[fletoret.com/ocr](https://fletoret.com/ocr). Pjesa tjetÃ«r i lihet detyrÃ«
lexuesit :)

<br>
<br>
<br>

### Referenca:

[^1]: Sipas ligjit: Nr. 35/2016: PÃ«r tÃ« drejtat e autorit dhe tÃ« drejtat e tjera tÃ« lidhura me to, veprat e tÃ« gjithÃ« shkrimtarÃ«ve qÃ« kanÃ« vdekur para 70 vitesh, janÃ« pasuri publike (nÃ« domain-in publik). - [kultura.gov.al](https://kultura.gov.al/e-drejta-e-autorit/)
[^2]:
    International Image
    Interoperability Framework - [https://iiif.io/](https://iiif.io/)

[^3]: Projekti nÃ« [GitHub](https://github.com/yaledhlab/iiif-downloader)
[^4]: ocrmac - A python wrapper to extract text from images on a mac system. Uses the vision framework from Apple. - [GitHub](https://github.com/madmaze/pytesseract)
[^5]: Python Tesseract - [GitHub](https://github.com/madmaze/pytesseract)
